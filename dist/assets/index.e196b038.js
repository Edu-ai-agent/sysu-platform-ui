import{b as W,l as Z,k as j,g as N,d as G,__tla as J}from"./index.5cfbf42e.js";import{M as R,r as f,a3 as X,ak as r,au as Y,o as B,a as ee,b as q,W as F,a0 as ae,u as e,$ as a,V as t,ad as le,Z as u,_ as m,E as oe,U as te,R as ne,aC as re}from"./vue.86fe07f1.js";import{u as se,__tla as de}from"./table.e019e948.js";import{f as ce,d as ie,__tla as ue}from"./datasource.4f323617.js";let V,me=Promise.all([(()=>{try{return J}catch{}})(),(()=>{try{return de}catch{}})(),(()=>{try{return ue}catch{}})()]).then(async()=>{let _,g,b,w;_={class:"layout-padding"},g={class:"layout-padding-auto layout-padding-view"},b={class:"mb8",style:{width:"100%"}},w=R({name:"systemDatasourceConf"}),V=R({...w,setup(pe){const L=re(()=>G(()=>import("./form.7134657b.js").then(async l=>(await l.__tla,l)),["assets/form.7134657b.js","assets/index.5cfbf42e.js","assets/vue.86fe07f1.js","assets/index.192907a2.css","assets/datasource.4f323617.js","assets/dict.b80056c9.js","assets/dict.5633e5fc.js"])),{t:s}=W(),h=f(),C=f(),y=f(!0),k=f([]),$=f(!0),c=X({queryForm:{},pageList:ce,descs:["create_time"]}),{getDataList:p,currentChangeHandle:z,sizeChangeHandle:E,tableStyle:v}=se(c),U=l=>{Z("/gen/dsconf/doc",{dsName:l},`${l}.html`)},H=()=>{C.value.resetFields(),p()},K=l=>{k.value=l.map(({id:o})=>o),$.value=!l.length},x=async l=>{try{await j().confirm(s("common.delConfirmText"))}catch{return}try{await ie(l),p(),N().success(s("common.delSuccessText"))}catch(o){N().error(o.msg)}};return(l,o)=>{const P=r("el-input"),S=r("el-form-item"),i=r("el-button"),Q=r("el-form"),T=r("el-row"),A=r("right-toolbar"),d=r("el-table-column"),I=r("el-table"),M=r("pagination"),O=Y("loading");return B(),ee("div",_,[q("div",g,[F(a(T,{class:"ml10"},{default:t(()=>[a(Q,{inline:!0,model:e(c).queryForm,onKeyup:le(e(p),["enter"]),ref_key:"queryRef",ref:C},{default:t(()=>[a(S,{label:l.$t("datasourceconf.dsName"),prop:"dsName"},{default:t(()=>[a(P,{placeholder:l.$t("datasourceconf.inputdsNameTip"),formDialogRef:"",style:{"max-width":"180px"},modelValue:e(c).queryForm.dsName,"onUpdate:modelValue":o[0]||(o[0]=n=>e(c).queryForm.dsName=n)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),a(S,null,{default:t(()=>[a(i,{onClick:e(p),icon:"search",type:"primary"},{default:t(()=>[u(m(l.$t("common.queryBtn")),1)]),_:1},8,["onClick"]),a(i,{onClick:H,formDialogRef:"",icon:"Refresh"},{default:t(()=>[u(m(l.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[ae,e(y)]]),a(T,null,{default:t(()=>[q("div",b,[a(i,{onClick:o[1]||(o[1]=n=>e(h).openDialog()),class:"ml10",icon:"folder-add",type:"primary"},{default:t(()=>[u(m(l.$t("common.addBtn")),1)]),_:1}),a(i,{disabled:e($),onClick:o[2]||(o[2]=n=>x(e(k))),class:"ml10",icon:"Delete",type:"primary"},{default:t(()=>[u(m(l.$t("common.delBtn")),1)]),_:1},8,["disabled"]),a(A,{onQueryTable:e(p),class:"ml10",style:{float:"right","margin-right":"20px"},showSearch:e(y),"onUpdate:showSearch":o[3]||(o[3]=n=>oe(y)?y.value=n:null)},null,8,["onQueryTable","showSearch"])])]),_:1}),F((B(),te(I,{data:e(c).dataList,onSelectionChange:K,style:{width:"100%"},border:"","cell-style":e(v).cellStyle,"header-cell-style":e(v).headerCellStyle},{default:t(()=>[a(d,{align:"center",type:"selection",width:"40"}),a(d,{label:e(s)("datasourceconf.index"),type:"index",width:"60"},null,8,["label"]),a(d,{label:e(s)("datasourceconf.name"),prop:"name","show-overflow-tooltip":""},null,8,["label"]),a(d,{label:e(s)("datasourceconf.dsName"),prop:"dsName","show-overflow-tooltip":""},null,8,["label"]),a(d,{label:e(s)("datasourceconf.dsType"),prop:"dsType","show-overflow-tooltip":""},null,8,["label"]),a(d,{label:e(s)("datasourceconf.username"),prop:"username","show-overflow-tooltip":""},null,8,["label"]),a(d,{label:e(s)("datasourceconf.createTime"),prop:"createTime","show-overflow-tooltip":""},null,8,["label"]),a(d,{label:l.$t("common.action"),width:"250"},{default:t(n=>[a(i,{icon:"document",onClick:D=>U(n.row.name),text:"",type:"primary"},{default:t(()=>[u(m(l.$t("datasourceconf.docBtn")),1)]),_:2},1032,["onClick"]),a(i,{icon:"edit",onClick:D=>e(h).openDialog(n.row.id),text:"",type:"primary"},{default:t(()=>[u(m(l.$t("common.editBtn")),1)]),_:2},1032,["onClick"]),a(i,{icon:"delete",onClick:D=>x([n.row.id]),text:"",type:"primary"},{default:t(()=>[u(m(l.$t("common.delBtn")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"])),[[O,e(c).loading]]),a(M,ne({onCurrentChange:e(z),onSizeChange:e(E)},e(c).pagination),null,16,["onCurrentChange","onSizeChange"])]),a(e(L),{onRefresh:o[4]||(o[4]=n=>e(p)()),ref_key:"formDialogRef",ref:h},null,512)])}}})});export{me as __tla,V as default};
