import{b as E,g as h,__tla as M}from"./index.5cfbf42e.js";import{g as R,p as W,a as Z,d as z,__tla as A}from"./dept.84d8fcce.js";import{M as v,r as p,a3 as G,ak as n,au as H,o as I,a as J,$ as r,V as o,b as K,Z as V,_ as $,u as l,W as L,U as N,E as P,n as Y}from"./vue.86fe07f1.js";let x,Q=Promise.all([(()=>{try{return M}catch{}})(),(()=>{try{return A}catch{}})()]).then(async()=>{let b,g,_;b={class:"system-dept-dialog-container"},g={class:"dialog-footer"},_=v({name:"systemDeptDialog"}),x=v({..._,emits:["refresh"],setup(X,{expose:O,emit:T}){const{t:w}=E(),i=p(),t=G({parentId:"",deptId:"",name:"",sortOrder:9999}),c=p([]),u=p(!1),m=p(!1),k=p({parentId:[{required:!0,message:"\u4E0A\u7EA7\u90E8\u95E8\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u90E8\u95E8\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sortOrder:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),U=(e,a)=>{u.value=!0,t.deptId="",Y(()=>{var d;(d=i.value)==null||d.resetFields(),t.parentId=a}),e==="edit"&&R(a).then(d=>{Object.assign(t,d.data)}).catch(d=>{h().error(d.msg)}),D()},B=async()=>{if(!await i.value.validate().catch(()=>{}))return!1;try{m.value=!0,t.deptId?await W(t):await Z(t),h().success(w(t.deptId?"common.editSuccessText":"common.addSuccessText")),u.value=!1,T("refresh")}catch(e){h().error(e.msg)}finally{m.value=!1}},D=async()=>{z().then(e=>{c.value=[];const a={id:"0",name:"\u6839\u90E8\u95E8",children:[]};a.children=e.data,c.value.push(a)})};return O({openDialog:U}),(e,a)=>{const d=n("el-tree-select"),f=n("el-form-item"),q=n("el-input"),C=n("el-input-number"),F=n("el-form"),y=n("el-button"),S=n("el-dialog"),j=H("loading");return I(),J("div",b,[r(S,{title:l(t).deptId?e.$t("common.editBtn"):e.$t("common.addBtn"),modelValue:l(u),"onUpdate:modelValue":a[4]||(a[4]=s=>P(u)?u.value=s:null),width:"600"},{footer:o(()=>[K("span",g,[r(y,{onClick:a[3]||(a[3]=s=>u.value=!1)},{default:o(()=>[V($(e.$t("common.cancelButtonText")),1)]),_:1}),r(y,{type:"primary",onClick:B,disabled:l(m)},{default:o(()=>[V($(e.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:o(()=>[L((I(),N(F,{ref_key:"deptDialogFormRef",ref:i,model:l(t),"label-width":"90px",rules:l(k)},{default:o(()=>[r(f,{label:e.$t("sysdept.parentId"),prop:"parentId"},{default:o(()=>[r(d,{modelValue:l(t).parentId,"onUpdate:modelValue":a[0]||(a[0]=s=>l(t).parentId=s),data:l(c),props:{value:"id",label:"name",children:"children"},class:"w100",clearable:"","check-strictly":"","render-after-expand":!1,placeholder:e.$t("sysdept.inputparentIdTip")},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),r(f,{label:e.$t("sysdept.name"),prop:"name"},{default:o(()=>[r(q,{modelValue:l(t).name,"onUpdate:modelValue":a[1]||(a[1]=s=>l(t).name=s),placeholder:e.$t("sysdept.inputnameTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(f,{label:e.$t("sysdept.sortOrder"),prop:"sortOrder"},{default:o(()=>[r(C,{modelValue:l(t).sortOrder,"onUpdate:modelValue":a[2]||(a[2]=s=>l(t).sortOrder=s),placeholder:e.$t("sysdept.inputsortOrderTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[j,l(m)]])]),_:1},8,["title","modelValue"])])}}})});export{Q as __tla,x as default};
