import{d as W,__tla as X}from"./index.5cfbf42e.js";import{a as Y,f as Z,b as ee,__tla as le}from"./table.e10f4129.js";import{l as ae,__tla as oe}from"./fieldtype.4e969b75.js";import{S as te}from"./sortable.esm.9c3c89c5.js";import{M as ue,r as b,a3 as c,k as de,n as re,ak as V,o as r,U as n,V as t,$ as a,u as p,E as P,a as h,ac as w,F as y,aC as me}from"./vue.86fe07f1.js";let R,pe=Promise.all([(()=>{try{return X}catch{}})(),(()=>{try{return le}catch{}})(),(()=>{try{return oe}catch{}})()]).then(async()=>{R=ue({__name:"edit",props:{tableName:{type:String},dsName:{type:String}},setup(L,{expose:O}){const N=L,D=me(()=>W(()=>import("./index.1e5f6d0a.js").then(async u=>(await u.__tla,u)),["assets/index.1e5f6d0a.js","assets/sortable.esm.9c3c89c5.js","assets/index.5cfbf42e.js","assets/vue.86fe07f1.js","assets/index.192907a2.css","assets/index.079c7acd.css"])),_=b(),x=b(""),j=b(!1),M=b(),U=b([]),E=b([]),T=b(),k=b(),m=b([]),B=c([{label:"DEFAULT",value:"DEFAULT"},{label:"INSERT",value:"INSERT"},{label:"UPDATE",value:"UPDATE"},{label:"INSERT_UPDATE",value:"INSERT_UPDATE"}]),H=c([{label:"=",value:"="},{label:"!=",value:"!="},{label:">",value:">"},{label:">=",value:">="},{label:"<",value:"<"},{label:"<=",value:"<="},{label:"like",value:"like"},{label:"left like",value:"left like"},{label:"right like",value:"right like"}]),$=c([{label:"\u5355\u884C\u6587\u672C",value:"text"},{label:"\u591A\u884C\u6587\u672C",value:"textarea"},{label:"\u6570\u5B57",value:"number"},{label:"\u5BCC\u6587\u672C\u7F16\u8F91\u5668",value:"editor"},{label:"\u4E0B\u62C9\u6846",value:"select"},{label:"\u5355\u9009\u6309\u94AE",value:"radio"},{label:"\u590D\u9009\u6846",value:"checkbox"},{label:"\u65E5\u671F",value:"date"},{label:"\u65E5\u671F\u65F6\u95F4",value:"datetime"},{label:"\u6587\u4EF6\u4E0A\u4F20",value:"upload-file"},{label:"\u56FE\u7247\u4E0A\u4F20",value:"upload-img"}]),z=c([{label:"\u5355\u884C\u6587\u672C",value:"text"},{label:"\u591A\u884C\u6587\u672C",value:"textarea"},{label:"\u6570\u5B57",value:"number"},{label:"\u4E0B\u62C9\u6846",value:"select"},{label:"\u5355\u9009\u6309\u94AE",value:"radio"},{label:"\u590D\u9009\u6846",value:"checkbox"},{label:"\u65E5\u671F",value:"date"},{label:"\u65E5\u671F\u65F6\u95F4",value:"datetime"}]),G=c([{label:"\u6570\u5B57",value:"number"},{label:"\u5B57\u6BCD",value:"letter"},{label:"\u5B57\u6BCD\u548C\u6570\u5B57",value:"letterAndNumber"},{label:"\u624B\u673A\u53F7\u7801",value:"mobilePhone"},{label:"\u5B57\u6BCD\u5F00\u5934\uFF0C\u4EC5\u53EF\u5305\u542B\u6570\u5B57",value:"letterStartNumberIncluded"},{label:"\u7981\u6B62\u4E2D\u6587\u8F93\u5165",value:"noChinese"},{label:"\u5FC5\u987B\u4E2D\u6587\u8F93\u5165",value:"chinese"},{label:"\u7535\u5B50\u90AE\u7BB1",value:"email"},{label:"URL\u7F51\u5740",value:"url"}]),g=c({tinyint:"number",smallint:"number",mediumint:"number",int:"number",integer:"number",bigint:"number",float:"number",datetime:"datetime",date:"date",Long:"number",Float:"number",Double:"number",BigDecimal:"number",text:"textarea",longtext:"editor",bit:"radio",char:"radio",varchar:"text"}),J=u=>{u.queryFormType=g[u.attrType],u.formType=g[u.attrType]},K=(u,d)=>{j.value=!0,k.value=d,T.value=u,_.value="field",S(),F(u,d),A(),C()};de(()=>{k.value=String(N.tableName),T.value=String(N.dsName),_.value="field",S(),F(T.value,k.value),A(),C()});const S=()=>{re(()=>{const u=window.document.querySelector("#pane-field");M.value=te.create(u,{handle:".drag-btn",onEnd:d=>{const{newIndex:i,oldIndex:o}=d,v=m.value.splice(o,1)[0];m.value.splice(i,0,v)}})})},q=b(!1),F=(u,d)=>{m.value=[],q.value=!0,Y(u,d).then(i=>{x.value=i.data.id,m.value=i.data.fieldList.map(o=>(o.queryFormType=g[o.fieldType],o.formType=g[o.fieldType],o))}).finally(()=>{q.value=!1})},A=async()=>{U.value=[];const{data:u}=await ae(),d=new Map;u.forEach(i=>{const{attrType:o,columnType:v}=i;d.has(o)||(d.set(o,v),U.value.push({label:o,value:v}))}),U.value.push({label:"Object",value:"Object"})},C=()=>{Z().then(u=>{for(const d of u.data)E.value.push({label:d.description,value:d.dictType})})};return O({openDialog:K,submitHandle:()=>new Promise(u=>{ee(T.value,k.value,m.value).then(()=>{u(x.value)})})}),(u,d)=>{const i=V("el-checkbox"),o=V("el-table-column"),v=V("el-input"),s=V("el-option"),f=V("el-select"),I=V("el-tab-pane"),Q=V("el-tabs");return r(),n(Q,{modelValue:p(_),"onUpdate:modelValue":d[3]||(d[3]=e=>P(_)?_.value=e:null)},{default:t(()=>[a(I,{label:"\u5C5E\u6027\u8BBE\u7F6E",name:"field"},{default:t(()=>[a(p(D),{ref:"fieldTable",modelValue:p(m),"onUpdate:modelValue":d[0]||(d[0]=e=>P(m)?m.value=e:null),hideAdd:!0,hideDelete:!0,"drag-sort":"",placeholder:"\u6682\u65E0\u6570\u636E"},{default:t(()=>[a(o,{label:"\u4E3B\u952E",prop:"primaryPk",width:"80","show-overflow-tooltip":""},{default:t(({row:e})=>[a(i,{modelValue:e.primaryPk,"onUpdate:modelValue":l=>e.primaryPk=l,"true-label":"1","false-label":"0",disabled:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(o,{label:"\u5B57\u6BB5\u540D",prop:"fieldName","show-overflow-tooltip":""}),a(o,{label:"\u8BF4\u660E",prop:"fieldComment","show-overflow-tooltip":""},{default:t(({row:e})=>[a(v,{modelValue:e.fieldComment,"onUpdate:modelValue":l=>e.fieldComment=l,placeholder:"\u8BF7\u8F93\u5165\u8BF4\u660E"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(o,{label:"\u5B57\u6BB5\u7C7B\u578B",prop:"fieldType","show-overflow-tooltip":""}),a(o,{label:"\u5C5E\u6027\u540D",prop:"attrName","show-overflow-tooltip":""},{default:t(({row:e})=>[a(v,{modelValue:e.attrName,"onUpdate:modelValue":l=>e.attrName=l,placeholder:"\u8BF7\u8F93\u5165\u5C5E\u6027\u540D"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(o,{label:"\u5C5E\u6027\u7C7B\u578B",prop:"attrType","show-overflow-tooltip":""},{default:t(({row:e})=>[a(f,{modelValue:e.attrType,"onUpdate:modelValue":l=>e.attrType=l,placeholder:"\u8BF7\u9009\u62E9\u5C5E\u6027\u7C7B\u578B",onChange:l=>J(e)},{default:t(()=>[(r(!0),h(y,null,w(p(U),l=>(r(),n(s,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(o,{label:"\u81EA\u52A8\u586B\u5145",prop:"autoFill","show-overflow-tooltip":""},{default:t(({row:e})=>[a(f,{modelValue:e.autoFill,"onUpdate:modelValue":l=>e.autoFill=l,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B"},{default:t(()=>[(r(!0),h(y,null,w(p(B),l=>(r(),n(s,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),a(o,{label:"\u5B57\u5178\u7C7B\u578B",prop:"fieldDict","show-overflow-tooltip":""},{default:t(({row:e})=>[a(f,{modelValue:e.fieldDict,"onUpdate:modelValue":l=>e.fieldDict=l,placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",filterable:"",clearable:"",disabled:e.primaryPk==="1"},{default:t(()=>[(r(!0),h(y,null,w(p(E),l=>(r(),n(s,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(I,{label:"\u5217\u8868\u67E5\u8BE2",name:"third"},{default:t(()=>[a(p(D),{ref:"gridTable",modelValue:p(m),"onUpdate:modelValue":d[1]||(d[1]=e=>P(m)?m.value=e:null),hideAdd:!0,hideDelete:!0,placeholder:"\u6682\u65E0\u6570\u636E"},{default:t(()=>[a(o,{label:"\u5C5E\u6027\u540D",prop:"attrName","show-overflow-tooltip":""}),a(o,{label:"\u8BF4\u660E",prop:"fieldComment","show-overflow-tooltip":""}),a(o,{label:"\u5217\u8868\u663E\u793A",prop:"gridItem",width:"100","show-overflow-tooltip":""},{default:t(({row:e})=>[a(i,{modelValue:e.gridItem,"onUpdate:modelValue":l=>e.gridItem=l,"true-label":"1","false-label":"0",disabled:e.primaryPk==="1"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),a(o,{label:"\u662F\u5426\u6392\u5E8F",prop:"gridSort",width:"100","show-overflow-tooltip":""},{default:t(({row:e})=>[a(i,{modelValue:e.gridSort,"onUpdate:modelValue":l=>e.gridSort=l,"true-label":"1","false-label":"0",disabled:e.primaryPk==="1"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),a(o,{label:"\u67E5\u8BE2\u663E\u793A",prop:"gridSort",width:"100","show-overflow-tooltip":""},{default:t(({row:e})=>[a(i,{modelValue:e.queryItem,"onUpdate:modelValue":l=>e.queryItem=l,"true-label":"1","false-label":"0",disabled:e.primaryPk==="1"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),a(o,{label:"\u67E5\u8BE2\u8868\u5355\u7C7B\u578B",prop:"queryFormType","show-overflow-tooltip":""},{default:t(({row:e})=>[a(f,{modelValue:e.queryFormType,"onUpdate:modelValue":l=>e.queryFormType=l,placeholder:"\u8BF7\u9009\u62E9\u67E5\u8BE2\u8868\u5355\u7C7B\u578B",disabled:e.primaryPk==="1"},{default:t(()=>[(r(!0),h(y,null,w(p(z),l=>(r(),n(s,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),a(o,{label:"\u67E5\u8BE2\u65B9\u5F0F",prop:"queryType","show-overflow-tooltip":""},{default:t(({row:e})=>[a(f,{modelValue:e.queryType,"onUpdate:modelValue":l=>e.queryType=l,placeholder:"\u8BF7\u9009\u62E9\u67E5\u8BE2\u65B9\u5F0F",disabled:e.primaryPk==="1"},{default:t(()=>[(r(!0),h(y,null,w(p(H),l=>(r(),n(s,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(I,{label:"\u8868\u5355\u9875\u9762",name:"form"},{default:t(()=>[a(p(D),{ref:"formTable",modelValue:p(m),"onUpdate:modelValue":d[2]||(d[2]=e=>P(m)?m.value=e:null),hideAdd:!0,hideDelete:!0,placeholder:"\u6682\u65E0\u6570\u636E"},{default:t(()=>[a(o,{label:"\u5C5E\u6027\u540D",prop:"attrName","show-overflow-tooltip":""}),a(o,{label:"\u8BF4\u660E",prop:"fieldComment","show-overflow-tooltip":""}),a(o,{label:"\u8868\u5355\u7C7B\u578B",prop:"formType","show-overflow-tooltip":""},{default:t(({row:e})=>[a(f,{modelValue:e.formType,"onUpdate:modelValue":l=>e.formType=l,placeholder:"\u8BF7\u9009\u62E9\u8868\u5355\u7C7B\u578B",disabled:e.primaryPk==="1"},{default:t(()=>[(r(!0),h(y,null,w(p($),l=>(r(),n(s,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),a(o,{label:"\u662F\u5426\u663E\u793A",prop:"formItem",width:"100","show-overflow-tooltip":""},{default:t(({row:e})=>[a(i,{modelValue:e.formItem,"onUpdate:modelValue":l=>e.formItem=l,"true-label":"1","false-label":"0",disabled:e.primaryPk==="1"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),a(o,{label:"\u8868\u5355\u5FC5\u586B",prop:"formRequired",width:"100","show-overflow-tooltip":""},{default:t(({row:e})=>[a(i,{modelValue:e.formRequired,"onUpdate:modelValue":l=>e.formRequired=l,"true-label":"1","false-label":"0",disabled:e.primaryPk==="1"},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),a(o,{label:"\u8868\u5355\u6548\u9A8C",prop:"formValidator","show-overflow-tooltip":""},{default:t(({row:e})=>[a(f,{modelValue:e.formValidator,"onUpdate:modelValue":l=>e.formValidator=l,placeholder:"\u8BF7\u9009\u62E9\u8868\u5355\u6548\u9A8C",disabled:e.primaryPk==="1"},{default:t(()=>[(r(!0),h(y,null,w(p(G),l=>(r(),n(s,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])}}})});export{pe as __tla,R as default};
