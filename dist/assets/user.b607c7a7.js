import{d as k,b as be,a as ge,u as _e,L as z,E as he,e as we,K as pe,M as ke,S as Ee,h as ve,_ as ye,__tla as Se}from"./index.5cfbf42e.js";import{d as Fe,M as U,aC as E,aH as Ce,az as H,r as v,a3 as Oe,l as K,k as ze,ak as u,o as Q,a as Le,b as i,$ as n,V as a,u as o,P as Re,Z as y,_ as S,U as Te,Y as Ae,Q as Me}from"./vue.86fe07f1.js";let Y,F,Pe=Promise.all([(()=>{try{return Se}catch{}})()]).then(async()=>{const L=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],c=(()=>{if(typeof document>"u")return!1;const l=L[0],r={};for(const t of L)if((t==null?void 0:t[1])in document){for(const[m,d]of t.entries())r[l[m]]=d;return r}return!1})(),R={change:c.fullscreenchange,error:c.fullscreenerror};let s={request(l=document.documentElement,r){return new Promise((t,m)=>{const d=()=>{s.off("change",d),t()};s.on("change",d);const C=l[c.requestFullscreen](r);C instanceof Promise&&C.then(d).catch(m)})},exit(){return new Promise((l,r)=>{if(!s.isFullscreen){l();return}const t=()=>{s.off("change",t),l()};s.on("change",t);const m=document[c.exitFullscreen]();m instanceof Promise&&m.then(t).catch(r)})},toggle(l,r){return s.isFullscreen?s.exit():s.request(l,r)},onchange(l){s.on("change",l)},onerror(l){s.on("error",l)},on(l,r){const t=R[l];t&&document.addEventListener(t,r,!1)},off(l,r){const t=R[l];t&&document.removeEventListener(t,r,!1)},raw:c};Object.defineProperties(s,{isFullscreen:{get:()=>!!document[c.fullscreenElement]},element:{enumerable:!0,get:()=>document[c.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[c.fullscreenEnabled]}}),c||(s={isEnabled:!1});let _,T,A,M,P,x,$,q;_=s,F=Fe("msg",{state:()=>({msgArray:[]}),actions:{getAllMsg(){return this.msgArray},setMsg(l){this.msgArray.push(l)},removeAll(){this.msgArray=[]}}}),T=["title"],A={class:"layout-navbars-breadcrumb-user-icon"},M=["title"],P={class:"layout-navbars-breadcrumb-user-link"},x=["src"],$=U({name:"layoutBreadcrumbUser"}),q=U({...$,setup(l){const r=E(()=>k(()=>import("./index.86579d36.js").then(async e=>(await e.__tla,e)),["assets/index.86579d36.js","assets/index.5cfbf42e.js","assets/vue.86fe07f1.js","assets/index.192907a2.css"])),t=E(()=>k(()=>import("./userNews.7673ca71.js").then(async e=>(await e.__tla,e)),["assets/userNews.7673ca71.js","assets/vue.86fe07f1.js","assets/index.5cfbf42e.js","assets/index.192907a2.css","assets/userNews.355dce93.css"])),m=E(()=>k(()=>import("./search.ad8aece8.js").then(async e=>(await e.__tla,e)),["assets/search.ad8aece8.js","assets/index.5cfbf42e.js","assets/vue.86fe07f1.js","assets/index.192907a2.css","assets/search.29229522.css"])),d=E(()=>k(()=>import("./personal.5ded2878.js").then(async e=>(await e.__tla,e)),["assets/personal.5ded2878.js","assets/index.5cfbf42e.js","assets/vue.86fe07f1.js","assets/index.192907a2.css","assets/user.22b8f69e.js","assets/personal.e6ae1f50.css"])),{locale:C,t:h}=be(),Z=Ce(),G=ge(),J=_e(),{userInfos:B}=H(G),{themeConfig:p}=H(J),D=v(),N=v(),V=v(),w=Oe({isScreenfull:!1,disabledI18n:"zh-cn",disabledSize:"large"}),W=v(!1),X=K(()=>{let e="";const{layout:f,isClassicSplitMenu:b}=p.value;return["defaults","columns"].includes(f)||f==="classic"&&!b?e="1":e="",e}),ee=()=>{if(!_.isEnabled)return he.warning("\u6682\u4E0D\u4E0D\u652F\u6301\u5168\u5C4F"),!1;_.toggle(),_.on("change",()=>{_.isFullscreen?w.isScreenfull=!0:w.isScreenfull=!1})},le=()=>{we.emit("openSetingsDrawer")},te=e=>{e==="logOut"?pe({closeOnClickModal:!1,closeOnPressEscape:!1,title:h("user.logOutTitle"),message:h("user.logOutMessage"),showCancelButton:!0,confirmButtonText:h("user.logOutConfirm"),cancelButtonText:h("user.logOutCancel"),buttonSize:"default",beforeClose:(f,b,g)=>{f==="confirm"?(b.confirmButtonLoading=!0,b.confirmButtonText=h("user.logOutExit"),setTimeout(()=>{g(),setTimeout(()=>{b.confirmButtonLoading=!1},300)},700)):g()}}).then(async()=>{await ke(),Ee.clear(),window.location.reload()}).catch(()=>{}):e==="personal"?V.value.open():Z.push(e)},ne=()=>{D.value.openSearch()},re=()=>{p.value.isLockScreen=!0,p.value.lockScreenTime=0,z.set("themeConfig",p.value)},j=(e,f)=>{w[f]=z.get("themeConfig")[e]},se=e=>{F().setMsg({label:"websocket\u6D88\u606F",value:e,time:ve(new Date)})},ae=K(()=>F().getAllMsg().length>0);return ze(()=>{z.get("themeConfig")&&(j("globalComponentSize","disabledSize"),j("globalI18n","disabledI18n"))}),(e,f)=>{const b=u("ele-Lock"),g=u("el-icon"),oe=u("ele-Search"),ue=u("ele-Bell"),ce=u("el-badge"),ie=u("el-popover"),me=u("ele-ArrowDown"),O=u("el-dropdown-item"),de=u("el-dropdown-menu"),fe=u("el-dropdown");return Q(),Le("div",{class:"layout-navbars-breadcrumb-user pr15",style:Me({flex:o(X)})},[i("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:re},[n(g,{title:e.$t("layout.threeLockScreenTime")},{default:a(()=>[n(b)]),_:1},8,["title"])]),i("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:ne},[n(g,{title:e.$t("user.title2")},{default:a(()=>[n(oe)]),_:1},8,["title"])]),i("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:le},[i("i",{class:"icon-skin iconfont",title:e.$t("user.title3")},null,8,T)]),i("div",A,[n(ie,{placement:"bottom",trigger:"click",transition:"el-zoom-in-top",width:300,persistent:!1},{reference:a(()=>[n(ce,{"is-dot":o(ae)},{default:a(()=>[n(g,{title:e.$t("user.title4")},{default:a(()=>[n(ue)]),_:1},8,["title"])]),_:1},8,["is-dot"])]),default:a(()=>[n(o(t),{ref_key:"newsRef",ref:N},null,512)]),_:1})]),i("div",{class:"layout-navbars-breadcrumb-user-icon mr10",onClick:ee},[i("i",{class:Re(["iconfont",o(w).isScreenfull?"icon-tuichuquanping":"icon-fullscreen"]),title:o(w).isScreenfull?e.$t("user.title6"):e.$t("user.title5")},null,10,M)]),n(fe,{"show-timeout":70,"hide-timeout":50,onCommand:te},{dropdown:a(()=>[n(de,null,{default:a(()=>[n(O,{command:"/home"},{default:a(()=>[y(S(e.$t("user.dropdown1")),1)]),_:1}),n(O,{command:"personal"},{default:a(()=>[y(S(e.$t("user.dropdown2")),1)]),_:1}),n(O,{divided:"",command:"logOut"},{default:a(()=>[y(S(e.$t("user.dropdown5")),1)]),_:1})]),_:1})]),default:a(()=>[i("span",P,[i("img",{src:e.baseURL+o(B).user.avatar,class:"layout-navbars-breadcrumb-user-link-photo mr5"},null,8,x),y(" "+S(o(B).user.username)+" ",1),n(g,{class:"el-icon--right"},{default:a(()=>[n(me)]),_:1})])]),_:1}),n(o(m),{ref_key:"searchRef",ref:D},null,512),o(W)?(Q(),Te(o(r),{key:0,uri:"/admin/ws/info",onRollback:se})):Ae("",!0),n(o(d),{ref_key:"personalDrawerRef",ref:V},null,512)],4)}}});let I;I=ye(q,[["__scopeId","data-v-0b7278ef"]]),Y=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}))});export{Pe as __tla,Y as a,F as u};
