import{M as h,r as y,aD as I,l as d,i as m,au as w,o as n,a as o,b as k,F as O,ac as b,W as c,$ as v,V as x,a0 as L,u as p,a6 as R,n as V}from"./vue.86fe07f1.js";const B={class:"layout-padding layout-padding-unset layout-iframe"},D={class:"layout-padding-auto layout-padding-view"},P=["src","data-url"],S=h({name:"layoutIframeView"}),C=h({...S,props:{refreshKey:{type:String,default:()=>""},name:{type:String,default:()=>"slide-right"},list:{type:Array,default:()=>[]}},setup(f){const r=f,l=y(),i=I(),g=d(()=>r.list.filter(e=>e.meta?.isIframeOpen)),_=d(()=>i.path),u=(e,a)=>{V(()=>{if(!l.value)return!1;l.value.forEach(t=>{t.dataset.url===e&&(t.onload=()=>{a.meta?.isIframeOpen&&a.meta.loading&&(a.meta.loading=!1)})})})};return m(()=>i.fullPath,e=>{const a=r.list.find(t=>t.path===e);if(!a)return!1;a.meta.isIframeOpen||(a.meta.isIframeOpen=!0),u(e,a)},{immediate:!0}),m(()=>r.refreshKey,()=>{const e=r.list.find(a=>a.path===i.path);if(!e)return!1;e.meta.isIframeOpen&&(e.meta.isIframeOpen=!1),setTimeout(()=>{e.meta.isIframeOpen=!0,e.meta.loading=!0,u(i.fullPath,e)})},{deep:!0}),(e,a)=>{const t=w("loading");return n(),o("div",B,[k("div",D,[(n(!0),o(O,null,b(p(g),s=>c((n(),o("div",{class:"w100",key:s.path,"element-loading-background":"white"},[v(R,{name:f.name},{default:x(()=>[c((n(),o("iframe",{src:s.meta.isLink,key:s.path,frameborder:"0",height:"100%",width:"100%",style:{position:"absolute"},"data-url":s.path,ref_for:!0,ref_key:"iframeRef",ref:l},null,8,P)),[[L,p(_)===s.path]])]),_:2},1032,["name"])])),[[t,s.meta.loading]])),128))])])}}});export{C as default};
