import{u as Y,__tla as ee}from"./table.e019e948.js";import{s as T,b as le,k as oe,g as D,__tla as ae}from"./index.5cfbf42e.js";import{u as te,__tla as re}from"./dict.b80056c9.js";import{M as $,r as c,a3 as ne,ak as s,au as V,o as d,U as g,V as i,b as z,$ as l,W as b,u as e,Z as w,_ as j,E as M,R as se}from"./vue.86fe07f1.js";import{__tla as ie}from"./dict.5633e5fc.js";let N,ue=Promise.all([(()=>{try{return ee}catch{}})(),(()=>{try{return ae}catch{}})(),(()=>{try{return re}catch{}})(),(()=>{try{return ie}catch{}})()]).then(async()=>{function U(p){return T({url:"/job/sys-job-log/page",method:"get",params:p})}function q(p){return T({url:"/job/sys-job-log",method:"delete",data:p})}let v,x,C;v={class:"layout-padding-auto layout-padding-view"},x={class:"mb8",style:{width:"100%"}},C=$({name:"job-log"}),N=$({...C,setup(p,{expose:B}){const{t}=le(),m=c(!1),{job_execute_status:F}=te("job_type","job_execute_status"),H=c(),_=c(!0),S=c([]),L=c(!0),u=ne({queryForm:{jobId:""},pageList:U,createdIsNeed:!1}),{getDataList:h,currentChangeHandle:Q,sizeChangeHandle:R,tableStyle:k}=Y(u),W=o=>{m.value=!0,u.queryForm.jobId=o,h()},E=o=>{S.value=o.map(({jobLogId:a})=>a),L.value=!o.length},I=async o=>{try{await oe().confirm(t("common.delConfirmText"))}catch{return}try{await q(o),h(),D().success(t("common.delSuccessText"))}catch(a){D().error(a.msg)}};return B({openDialog:W}),(o,a)=>{const y=s("el-button"),P=s("right-toolbar"),Z=s("el-row"),r=s("el-table-column"),A=s("dict-tag"),G=s("el-table"),J=s("pagination"),K=s("el-dialog"),f=V("auth"),O=V("loading");return d(),g(K,{modelValue:e(m),"onUpdate:modelValue":a[2]||(a[2]=n=>M(m)?m.value=n:null),"close-on-click-modal":!1,fullscreen:"",title:"\u8FD0\u884C\u65E5\u5FD7",draggable:""},{default:i(()=>[z("div",v,[l(Z,null,{default:i(()=>[z("div",x,[b((d(),g(y,{formDialogRef:"",disabled:e(L),icon:"Delete",type:"primary",class:"ml10",onClick:a[0]||(a[0]=n=>I(e(S)))},{default:i(()=>[w(j(o.$t("common.delBtn")),1)]),_:1},8,["disabled"])),[[f,"sys_log_del"]]),l(P,{showSearch:e(_),"onUpdate:showSearch":a[1]||(a[1]=n=>M(_)?_.value=n:null),class:"ml10",style:{float:"right","margin-right":"20px"},onQueryTable:e(h)},null,8,["showSearch","onQueryTable"])])]),_:1}),b((d(),g(G,{data:e(u).dataList,style:{width:"100%"},onSelectionChange:E,border:"","cell-style":e(k).cellStyle,"header-cell-style":e(k).headerCellStyle},{default:i(()=>[l(r,{type:"selection",width:"40",align:"center"}),l(r,{type:"index",label:e(t)("log.index"),width:"80"},null,8,["label"]),l(r,{prop:"jobName",label:e(t)("log.jobName"),"show-overflow-tooltip":""},null,8,["label"]),l(r,{prop:"jobMessage",label:e(t)("log.jobMessage"),"show-overflow-tooltip":""},null,8,["label"]),l(r,{prop:"jobLogStatus",label:e(t)("log.jobLogStatus"),"show-overflow-tooltip":""},{default:i(n=>[l(A,{options:e(F),value:n.row.jobLogStatus},null,8,["options","value"])]),_:1},8,["label"]),l(r,{prop:"executeTime",label:e(t)("log.executeTime"),"show-overflow-tooltip":""},null,8,["label"]),l(r,{prop:"exceptionInfo",label:e(t)("log.exceptionInfo"),"show-overflow-tooltip":""},null,8,["label"]),l(r,{prop:"createTime",label:e(t)("log.createTime"),"show-overflow-tooltip":""},null,8,["label"]),l(r,{label:o.$t("common.action"),width:"150"},{default:i(n=>[b((d(),g(y,{text:"",type:"primary",onClick:X=>e(H).openDialog(n.row.jobLogId)},{default:i(()=>[w(j(o.$t("common.editBtn")),1)]),_:2},1032,["onClick"])),[[f,"pix_log_edit"]]),b((d(),g(y,{text:"",type:"primary",onClick:X=>I([n.row.jobLogId])},{default:i(()=>[w(j(o.$t("common.delBtn")),1)]),_:2},1032,["onClick"])),[[f,"sys_log_del"]])]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"])),[[O,e(u).loading]]),l(J,se({onSizeChange:e(R),onCurrentChange:e(Q)},e(u).pagination),null,16,["onSizeChange","onCurrentChange"])])]),_:1},8,["modelValue"])}}})});export{ue as __tla,N as default};
