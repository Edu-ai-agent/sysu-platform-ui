import{f as E,e as H,__tla as N}from"./role.ca07fafb.js";import{b as U,p as W,o as Z,g as $,__tla as q}from"./index.5cfbf42e.js";import{M as D,r as n,a3 as B,ak as i,au as J,o as L,a as R,$ as o,V as r,b as u,_ as b,u as l,Z as x,W as z}from"./vue.86fe07f1.js";let w,F=Promise.all([(()=>{try{return N}catch{}})(),(()=>{try{return q}catch{}})()]).then(async()=>{let f,m,p,y,k;f={class:"system-role-dialog-container"},m={class:"flex items-center justify-between"},p={class:"flex mr-16"},y={class:"dialog-footer"},k=D({name:"role-permession"}),w=D({...k,setup(G,{expose:C}){const{t:K}=U(),d=n(),S=n(!0),c=n(!1),e=B({checkedKeys:[],treeData:[],defaultProps:{label:"name",value:"id"},roleId:"",dialog:{isShowDialog:!1,title:"\u5206\u914D\u6743\u9650",submitTxt:"\u66F4\u65B0"}}),h=n([]),I=t=>{e.checkedKeys=[],e.treeData=[],h.value=[],e.roleId=t.roleId,c.value=!0,E(t.roleId).then(a=>(h.value=a.data,W())).then(a=>{e.treeData=a.data,e.checkedKeys=Z.resolveAllEunuchNodeId(e.treeData,h.value,[])}).finally(()=>{c.value=!1}),e.dialog.isShowDialog=!0},T=t=>{const a=e.treeData;for(let s=0;s<a.length;s++)d.value.store.nodesMap[a[s].id].expanded=t},V=t=>{var a,s;t?(a=d.value)==null||a.setCheckedKeys(e.treeData.map(g=>g.id)):(s=d.value)==null||s.setCheckedKeys([])},j=()=>{const t=d.value.getCheckedKeys().join(",").concat(",").concat(d.value.getHalfCheckedKeys().join(","));c.value=!0,H(e.roleId,t).then(()=>{e.dialog.isShowDialog=!1,$().success(K("common.editSuccessText"))}).finally(()=>{c.value=!1})};return C({openDialog:I}),(t,a)=>{const s=i("el-checkbox"),g=i("el-tree"),P=i("el-scrollbar"),v=i("el-button"),M=i("el-dialog"),A=J("loading");return L(),R("div",f,[o(M,{width:"30%",modelValue:l(e).dialog.isShowDialog,"onUpdate:modelValue":a[1]||(a[1]=_=>l(e).dialog.isShowDialog=_),"close-on-click-modal":!1,draggable:""},{header:r(()=>[u("div",m,[u("div",null,b(l(e).dialog.title),1),u("div",p,[o(s,{label:"\u5C55\u5F00/\u6298\u53E0",onChange:T}),o(s,{label:"\u5168\u9009/\u4E0D\u5168\u9009",onChange:V})])])]),footer:r(()=>[u("span",y,[o(v,{onClick:a[0]||(a[0]=_=>l(e).dialog.isShowDialog=!1)},{default:r(()=>[x("\u53D6 \u6D88")]),_:1}),o(v,{type:"primary",onClick:j},{default:r(()=>[x(b(l(e).dialog.submitTxt),1)]),_:1})])]),default:r(()=>[o(P,{class:"h-[400px] sm:h-[600px]"},{default:r(()=>[z(o(g,{ref_key:"menuTree",ref:d,data:l(e).treeData,"default-checked-keys":l(e).checkedKeys,"check-strictly":!l(S),props:l(e).defaultProps,class:"filter-tree","node-key":"id","highlight-current":"","show-checkbox":""},null,8,["data","default-checked-keys","check-strictly","props"]),[[A,l(c)]])]),_:1})]),_:1},8,["modelValue"])])}}})});export{F as __tla,w as default};
